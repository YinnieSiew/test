{% extends 'base.html' %} 

{% block title %}Create Profile{% endblock %}

{% block content %}
<style>
    body {
        background-color: #EDE0D7;
    }
    select {
        appearance: none;
        background-image: url('{{ url_for("static", filename="cat_paws_icon.png") }}');
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 20px;
    }
    block { display: block; }
    .none { display: none; }
</style>
<div style="display: flex; justify-content: center; align-items: center; height: calc(100vh - 40px);">
    <form action="{{ url_for('create_profile')}}" method="post" enctype="multipart/form-data" onsubmit="return confirmSubmission();" style="width: 500px; padding: 20px; border: 1px solid #ddd; border-radius: 10px; background-color: #f9f9f9;">
        <h1 style="text-align: center; margin-bottom: 20px;">Create a New Cat Profile</h1>
        <div style="margin-bottom: 20px; text-align: center;">
            <div style="width: 150px; height: 150px; border-radius: 50%; border: 2px solid #ddd; margin: 0 auto; position: relative; display: flex; justify-content: center; align-items: center; overflow: hidden;">
                <p id="profilePictureText" style="margin: 0; font-size: 14px; color: #666; text-align: center; position: absolute; font-weight: bold;">Profile Picture Preview</p>
                <img id="profilePicturePreview" alt="Profile Picture Preview" style="width: 100%; height: 100%; object-fit: cover; display: none;">
            </div>
            <br>
            <label for="profile_picture" style="display: block; font-weight: bold; margin-bottom: 5px;">Upload Profile Picture:</label>
            <input type="file" id="profile_picture" name="profile_picture" accept="image/*" required onchange="previewProfilePicture()" style="margin-bottom: 5px;">
            <br>
            <button type="button" id="removePictureButton" onclick="removeProfilePicture()" class="none" style="padding: 5px 10px; background-color: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">Remove</button>             
        </div>
        <div style="margin-bottom: 15px;">
            <label for="name" style="display: inline-block; width: 150px; font-weight: bold;">Name:</label>
            <input type="text" id="name" name="name" required style="width: 300px; padding: 5px; border: 1px solid #ccc; border-radius: 5px;" minlength="3" maxlength="15" pattern="[A-Za-z]+" title="Only letters (A-Z or a-z) are allowed. Name must be 3-15 characters long.">
        </div>
        <div style="margin-bottom: 15px;">
            <label for="gender" style="display: inline-block; width: 150px; font-weight: bold;">Gender:</label>
            <select id="gender" name="gender" required style="width: 310px; padding: 5px; border: 1px solid #ccc; border-radius: 5px;">
                <option value="" disabled selected>Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Not sure">Not sure</option>
            </select>
        </div>
        <div style="margin-bottom: 15px;">
            <label for="color" style="display: inline-block; width: 150px; font-weight: bold;">Color:</label>
            <select id="color" name="color" required style="width: 310px; padding: 5px; border: 1px solid #ccc; border-radius: 5px;">
                <option value="" disabled selected>Select Color</option>
                <option value="Black">Black</option>
                <option value="White">White</option>
                <option value="Brown">Brown</option>
                <option value="Gray(Blue)">Gray (Blue)</option>
                <option value="Orange(Ginger)">Orange (Ginger)</option>
                <option value="Calico">Calico</option>
                <option value="Tortoiseshell">Tortoiseshell</option>
                <option value="Tabby">Tabby</option>
                <option value="Cream">Cream</option>
                <option value="Silver">Silver</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div style="margin-bottom: 15px;">
            <label for="description" style="display: inline-block; width: 150px; vertical-align: top; font-weight: bold;">Description:</label>
            <textarea id="description" name="description" style="width: 300px; height: 100px; padding: 5px; border: 1px solid #ccc; border-radius: 5px; resize: none; font-family: 'Times New Roman', Times, serif;" placeholder="Optional"></textarea><br>
        </div>
        <div style="text-align: center;">
            <button type="submit" style="padding: 10px 20px; background-color: #94693e; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Create</button>
        </div>
    </form>
</div>

<script>
    function previewProfilePicture() {
        const fileInput = document.getElementById('profile_picture');
        const previewImage = document.getElementById('profilePicturePreview');
        const previewText = document.getElementById('profilePictureText');
        const removeButton = document.getElementById('removePictureButton');

        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                previewImage.src = e.target.result;
                previewImage.style.display = 'block';
                previewText.style.display = 'none';
                removeButton.style.display = 'inline-block';
            }
            reader.readAsDataURL(file);
        } else {
            previewImage.style.display = 'none';
            previewText.style.display = 'block';
            removeButton.style.display = 'none';
        }
    }
    function removeProfilePicture() {
        const fileInput = document.getElementById('profile_picture');
        const previewImage = document.getElementById('profilePicturePreview');
        const previewText = document.getElementById('profilePictureText');
        const removeButton = document.getElementById('removePictureButton');

        fileInput.value = '';
        previewImage.style.display = 'none';
        previewText.style.display = 'block';
        removeButton.style.display = 'none'; 
    }
</script>
{% endblock %}