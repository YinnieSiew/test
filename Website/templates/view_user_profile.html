{% extends "base.html" %}

{% block title %}User Profile{% endblock %}

{% block content %}

<style>
  body {
    background-color: #f2eadf;
  }

  h2, h5, label {
    font-family: 'Times New Roman';
    color: rgb(78, 68, 57);
  }

  .profile-header {
    position: relative;
    margin-bottom: 30px;
    margin-top: 25px;
    align-items: center;
  }

  .cover-photo {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 20px;
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    cursor: pointer;
  }

  .cover-photo:hover {
    transform: scale(1.01);
    box-shadow: 0 8px 22px rgba(0, 0, 0, 0.15);
  }

  .profile-content {
    position: absolute;
    top: 100px;
    left: 30px;
    display: flex;
    align-items: center;
    border-radius: 10px;
  }

  .profile-picture {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid white;
    background: white;
    cursor: pointer;
  }

  .profile-picture:hover {
    transform: scale(1.05);
    transition: transform 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .profile-info {
    margin-left: 20px;
  }

  .profile-details {
    margin-top: 45px;
    margin-bottom: 45px;
    background: #fff7ec;
    padding: 20px;
    border-radius: 10px;
  }

  button {
    font-family: 'Times New Roman';
    background-color: rgb(176, 148, 119);
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
  }

  button:hover {
    background-color: rgb(156, 128, 100);
  }

  .modal {
    display: none;
    position: fixed;
    z-index: 99;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    justify-content: center;
    align-items: center;
  }

  .modal img {
    width: auto;
    height: 80vh;
    max-width: 90vw;
    border-radius: 10px;
    border: 10px solid #f2eadf;
  }

</style>

<h1 style="font-size: 40px; font-weight: bold; text-align: center; padding-top: 25px; color: #94693e; font-family: 'Times New Roman';">
    {{ profile_owner.name }}'s Profile
</h1>
<h5 style="font-size: 20px; font-weight: bold; text-align: center; margin-top: 5px; margin-bottom: 20px; color: #6b4f2f; font-family: 'Times New Roman'; font-style: italic;">
    Here is meowfileüêà‚Äç‚¨õ
</h5>

<div class="container mt-4">
  <div class="profile-details">

    <div class="profile-header">
      {% if profile_owner.cover_photo %}
        <img src="{{ url_for('static', filename='Userprofile/' ~ profile_owner.cover_photo) }}" alt="Cover Photo" class="cover-photo" onclick="toggleModal('{{ url_for('static', filename='Userprofile/' ~ profile_owner.cover_photo) }}')">
      {% else %}
        <img src="{{ url_for('static', filename='Userprofile/default_cover.png') }}" alt="Cover Photo" class="cover-photo" onclick="toggleModal('{{ url_for('static', filename='Userprofile/default_cover.png') }}')">
      {% endif %}

      <div class="profile-content">
        {% if profile_owner.profile_picture %}
          <img src="{{ url_for('static', filename='Userprofile/' ~ profile_owner.profile_picture) }}" alt="Profile Picture" class="profile-picture" onclick="toggleModal('{{ url_for('static', filename='Userprofile/' ~ profile_owner.profile_picture) }}')">
        {% else %}
          <img src="{{ url_for('static', filename='Userprofile/default_profilepic.png') }}" alt="Profile Picture" class="profile-picture" onclick="toggleModal('{{ url_for('static', filename='Userprofile/default_profilepic.png') }}')">
        {% endif %}

        <div class="profile-info">
          <h2><b>{{ profile_owner.name }}</b></h2>
          <h5><b>Status:</b> {{ profile_owner.status }}</h5>
        </div>
      </div>
    </div>

    <h5 style="padding: 5px;"><b>Email:</b> {{ profile_owner.email }}</h5>
    <h5 style="padding: 5px;"><b>Birthday:</b> {{ profile_owner.birthday if profile_owner.birthday else "-" }}</h5>
    <h5 style="padding: 5px;"><b>MBTI:</b> {{ profile_owner.mbti if profile_owner.mbti else "-" }}</h5>
    <h5 style="padding: 5px;"><b>Hobby:</b> {{ profile_owner.hobby if profile_owner.hobby else "-" }}</h5>
    <h5 style="padding: 5px;"><b>Bio:</b> {{ profile_owner.bio if profile_owner.bio else "-" }}</h5>

    <button onclick="location.href='{{ url_for('community.community_feature') }}'">üêæBack to Communityüêæ</button>

  </div>
</div>


<div class="post_container" style="display: block; align-items: end; color: #6b4f2f; font-family: 'Times New Roman';">
  <div class="user_posts">
    <h3 style="font-size: 30px; font-weight: bold; text-align: center;">
      {{ profile_owner.name }}'s posts
    </h3>

    <ul style="list-style:none; padding:0; display:flex; flex-direction: column; align-items: flex-end;">
      {% for post in posts %}
        <li>
            <a href="{{ url_for('community.post_detail', post_id=post.post_id) }}" style="display: flex; align-items: center; text-decoration: none; color: inherit; width: 100%;">
              {% if post.media_url %}
                <img src="{{ url_for('static', filename=post['media_url']) }}" alt="Post media" style="max-width:100px;">
              {% endif %}
              <p>{{ post.content }}</p>
              <p>Likes: {{ post.like_count }}</p>
            </a>
        </li>
      {% else %}
        <li>No posts yet.</li>
      {% endfor %}
    </ul>
   


  </div>

</div>  

<div class="modal" id="imageModal" onclick="closeModal()">
  <span class="modal-close" onclick="closeModal()">&times;</span>
  <img id="modalImage">
</div>

<script>
  function toggleModal(imageSrc) {
    const modal = document.getElementById("imageModal");
    const modalImage = document.getElementById("modalImage");

    modalImage.src = imageSrc;
    modal.style.display = "flex";
  }

  function closeModal() {
    document.getElementById("imageModal").style.display = "none";
  }
</script>

{% endblock %}
