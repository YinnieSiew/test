{% extends 'base.html' %} 

{% block title %}Contest{% endblock %}

{% block content %}
<style>
    body {
        background-color: #f2eadf;
    }

    .banner {
    width: 100%;
    max-width: 800px; /* Limits banner size */
    height: auto; /* Keeps aspect ratio */
    display: block;
    margin: 0 auto; /* Centers the banner */
    }
</style>

    <div style="padding: 20px;">
    <h1 style="text-align: center; margin-bottom: 20px; font-family: 'Times New Roman', Times, serif;">Contest</h1>

    {% for contest in contests %}
    <div class="contest-card">
        <h2>{{ contest.name }}</h2>

        <!-- Show contest banner if available -->
        {% if contest.banner_url %}
            <img src="{{ contest.banner_url }}" alt="Contest Banner" class="banner">
        {% endif %}

        <p>{{ contest.description }}</p>
        <p>Start Date: {{ contest.start_datetime }}</p>
        <p>End Date: {{ contest.end_datetime }}</p>

    {% if current_user.role == 'admin' %}
        <button id="addContest" style="position: fixed; bottom: 20px; right: 20px;">+</button>
    {% endif %}

</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const userRole = "{{ current_user.role }}"; //Get role from backend
        if (userRole !== "admin") {
            document.getElementById("addContest").style.display = "none"; //Hide button for non-admins
        }
    });
</script>
{% endblock %}